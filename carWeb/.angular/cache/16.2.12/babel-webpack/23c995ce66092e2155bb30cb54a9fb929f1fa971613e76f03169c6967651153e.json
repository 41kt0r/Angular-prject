{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let CreateComponent = class CreateComponent {\n  constructor(EpisodeService, titleService, router, authService) {\n    this.EpisodeService = EpisodeService;\n    this.titleService = titleService;\n    this.router = router;\n    this.authService = authService;\n  }\n  ngOnInit() {\n    this.titleService.setTitle('Create');\n  }\n  createMethod(formData) {\n    const userId = this.authService.getUserData()?._id;\n    const userInput = formData.value;\n    userInput._ownerId = userId;\n    this.EpisodeService.getAllEpisodes().subscribe({\n      next: episodes => {\n        const episodeExists = episodes.some(episode => episode.name === userInput.name);\n        if (episodeExists) {\n          this.errorMessage = 'Episode with this name already exists.';\n        } else {\n          this.subscribe$ = this.EpisodeService.addEpisode(userInput).subscribe({\n            next: () => this.router.navigate(['/episodes']),\n            error: error => this.errorMessage = error.error.message\n          });\n        }\n      },\n      error: error => {\n        if (error.message.includes('Unknown Error')) {\n          this.errorMessage = 'Server not connected!';\n        } else {\n          this.errorMessage = error.error.message;\n        }\n      }\n    });\n  }\n  ngOnDestroy() {\n    if (this.subscribe$ != undefined) {\n      this.subscribe$.unsubscribe();\n    }\n  }\n};\nCreateComponent = __decorate([Component({\n  selector: 'app-create',\n  templateUrl: './create.component.html',\n  styleUrls: ['./create.component.css']\n})], CreateComponent);","map":{"version":3,"names":["Component","CreateComponent","constructor","EpisodeService","titleService","router","authService","ngOnInit","setTitle","createMethod","formData","userId","getUserData","_id","userInput","value","_ownerId","getAllEpisodes","subscribe","next","episodes","episodeExists","some","episode","name","errorMessage","subscribe$","addEpisode","navigate","error","message","includes","ngOnDestroy","undefined","unsubscribe","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\SoftUni\\Angular pj\\car-web\\src\\app\\features\\posts\\create\\create.component.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Title } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { EpisodeInterface } from 'src/app/core/interfaces/Episode';\n\nimport { AuthService } from 'src/app/core/services/auth.service';\nimport { EpisodeService } from 'src/app/core/services/episodes.service';\n\n@Component({\n  selector: 'app-create',\n  templateUrl: './create.component.html',\n  styleUrls: ['./create.component.css'],\n})\nexport class CreateComponent implements OnInit, OnDestroy {\n  subscribe$!: Subscription;\n  errorMessage!: string;\n\n  constructor(\n    private EpisodeService: EpisodeService,\n    private titleService: Title,\n    private router: Router,\n    private authService: AuthService\n  ) {}\n\n  ngOnInit(): void {\n    this.titleService.setTitle('Create');\n  }\n\n  createMethod(formData: NgForm) {\n    const userId = this.authService.getUserData()?._id;\n    const userInput = formData.value;\n    userInput._ownerId = userId;\n\n    this.EpisodeService.getAllEpisodes().subscribe({\n      next: (episodes: EpisodeInterface[]) => {\n        \n        const episodeExists = episodes.some(episode => episode.name === userInput.name);\n        if (episodeExists) {\n          this.errorMessage = 'Episode with this name already exists.';\n        } else {\n          this.subscribe$ = this.EpisodeService.addEpisode(userInput).subscribe({\n            next: () => this.router.navigate(['/episodes']),\n            error: (error) => this.errorMessage = error.error.message,\n          });\n        }\n      },\n      error: (error) => {\n        if (error.message.includes('Unknown Error')) {\n          this.errorMessage = 'Server not connected!'\n        } else {\n          this.errorMessage = error.error.message;\n        }\n      }\n    });\n  }\n  ngOnDestroy(): void {\n    if (this.subscribe$ != undefined) {\n      this.subscribe$.unsubscribe();\n    }\n  }\n}"],"mappings":";AAAA,SAASA,SAAS,QAA2B,eAAe;AAerD,WAAMC,eAAe,GAArB,MAAMA,eAAe;EAI1BC,YACUC,cAA8B,EAC9BC,YAAmB,EACnBC,MAAc,EACdC,WAAwB;IAHxB,KAAAH,cAAc,GAAdA,cAAc;IACd,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,WAAW,GAAXA,WAAW;EAClB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACH,YAAY,CAACI,QAAQ,CAAC,QAAQ,CAAC;EACtC;EAEAC,YAAYA,CAACC,QAAgB;IAC3B,MAAMC,MAAM,GAAG,IAAI,CAACL,WAAW,CAACM,WAAW,EAAE,EAAEC,GAAG;IAClD,MAAMC,SAAS,GAAGJ,QAAQ,CAACK,KAAK;IAChCD,SAAS,CAACE,QAAQ,GAAGL,MAAM;IAE3B,IAAI,CAACR,cAAc,CAACc,cAAc,EAAE,CAACC,SAAS,CAAC;MAC7CC,IAAI,EAAGC,QAA4B,IAAI;QAErC,MAAMC,aAAa,GAAGD,QAAQ,CAACE,IAAI,CAACC,OAAO,IAAIA,OAAO,CAACC,IAAI,KAAKV,SAAS,CAACU,IAAI,CAAC;QAC/E,IAAIH,aAAa,EAAE;UACjB,IAAI,CAACI,YAAY,GAAG,wCAAwC;SAC7D,MAAM;UACL,IAAI,CAACC,UAAU,GAAG,IAAI,CAACvB,cAAc,CAACwB,UAAU,CAACb,SAAS,CAAC,CAACI,SAAS,CAAC;YACpEC,IAAI,EAAEA,CAAA,KAAM,IAAI,CAACd,MAAM,CAACuB,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;YAC/CC,KAAK,EAAGA,KAAK,IAAK,IAAI,CAACJ,YAAY,GAAGI,KAAK,CAACA,KAAK,CAACC;WACnD,CAAC;;MAEN,CAAC;MACDD,KAAK,EAAGA,KAAK,IAAI;QACf,IAAIA,KAAK,CAACC,OAAO,CAACC,QAAQ,CAAC,eAAe,CAAC,EAAE;UAC3C,IAAI,CAACN,YAAY,GAAG,uBAAuB;SAC5C,MAAM;UACL,IAAI,CAACA,YAAY,GAAGI,KAAK,CAACA,KAAK,CAACC,OAAO;;MAE3C;KACD,CAAC;EACJ;EACAE,WAAWA,CAAA;IACT,IAAI,IAAI,CAACN,UAAU,IAAIO,SAAS,EAAE;MAChC,IAAI,CAACP,UAAU,CAACQ,WAAW,EAAE;;EAEjC;CACD;AA/CYjC,eAAe,GAAAkC,UAAA,EAL3BnC,SAAS,CAAC;EACToC,QAAQ,EAAE,YAAY;EACtBC,WAAW,EAAE,yBAAyB;EACtCC,SAAS,EAAE,CAAC,wBAAwB;CACrC,CAAC,C,EACWrC,eAAe,CA+C3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}